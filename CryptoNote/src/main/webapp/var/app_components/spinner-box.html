<link rel="import" href="../bower_components/paper-spinner/paper-spinner-lite.html">
<link rel="import" href="../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../bower_components/neon-animation/web-animations.html">
<link rel="import" href="../bower_components/neon-animation/animations/fade-out-animation.html">
<link rel="import" href="../bower_components/neon-animation/animations/fade-in-animation.html">

<dom-module id="spinner-box">
<template>
	<style include="shared-styles"></style>
	<style is="custom-style" include="iron-flex iron-flex-alignment"></style>
    <style>
		:host { position:absolute; width:100%; height:100%; margin:0; padding:0; }
	    :host .top {background-color:rgba(200,200,200,0.1); width:100%; height:100%; }
	    :host .msg {font-size:0.6em; font-style:italic; background-color:var(--paper-grey-50); width:120px; padding:0.5em; text-align:center; cursor:pointer;}
	    :host .spin { position:absolute;}
    </style>
	<div class="top layout horizontal center-center">
		<div class="layout vertical center-center msg" on-click="opendialog">
			<div>[[lib("sb_npa",lang)]]</div>
			<paper-spinner-lite class="green spin" active></paper-spinner-lite>
		</div>
	</div>
	<paper-dialog id="actions" entry-animation="fade-in-animation" exit-animation="fade-out-animation">
		<p>[[lib("sb_texte", lang)]]</p>
		<div class="buttons">
	    	<paper-button dialog-dismiss>[[lib("sb_int", lang)]]</paper-button>
		    <paper-button dialog-confirm autofocus>[[lib("sb_att", lang)]]</paper-button>
		</div>
	</paper-dialog>
</template>
<script>
	class SpinnerBox extends Polymer.Element {
		static get is() { return "spinner-box"; }
	      
		static get properties() { return {
			lang : {type:String, value:"xx"},
			};
		}
		constructor() { 
			super();
			App.setMsg("fr", "sb_npa", "Pour ne plus  attendre cliquer ici.");
			App.setMsg("fr", "sb_texte", "Interrompre correspond à renoncer à l'action engagée qui sera traitée comme un échec."
					+ "L'autre option est d'avoir plus de patience.");
			App.setMsg("fr", "sb_att", "Attendre encore");
			App.setMsg("fr", "sb_int", "Interrompre");
		}
		lib(code, lang) { return App.lib(code);}
		opendialog() { this.$.actions.open(); }
    }
	customElements.define(SpinnerBox.is, SpinnerBox);
</script>
</dom-module>